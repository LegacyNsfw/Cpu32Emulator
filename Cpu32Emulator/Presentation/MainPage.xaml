<Page x:Class="Cpu32Emulator.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Cpu32Emulator.Presentation"
      NavigationCacheMode="Required">

  <Page.DataContext>
    <local:MainViewModel />
  </Page.DataContext>

  <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!-- Title Bar with Hamburger Button -->
    <Grid Grid.Row="0" 
          Background="{ThemeResource SystemControlBackgroundAltHighBrush}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      
      <!-- Hamburger Menu Button -->
      <Button x:Name="HamburgerButton"
              Grid.Column="0"
              Style="{StaticResource NavigationBackButtonNormalStyle}"
              Content="&#xE700;"
              FontFamily="Segoe MDL2 Assets"
              FontSize="16"
              Margin="10,5"
              Click="HamburgerButton_Click" />
      
      <!-- Title -->
      <TextBlock Grid.Column="1"
                 Text="CPU32 Emulator"
                 FontSize="24"
                 FontWeight="Bold"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                 Margin="0,10" />
    </Grid>

    <!-- Main Content with SplitView -->
    <SplitView x:Name="MainSplitView"
               Grid.Row="1"
               DisplayMode="Overlay"
               IsPaneOpen="False"
               OpenPaneLength="250">
      
      <!-- SplitView Pane (Left Menu) -->
      <SplitView.Pane>
        <Grid Background="{ThemeResource SystemControlBackgroundAltHighBrush}">
          <ScrollViewer>
            <StackPanel Margin="0,20,0,0">
              
              <!-- File Section -->
              <TextBlock Text="File"
                        FontWeight="Bold"
                        FontSize="16"
                        Margin="20,0,20,10"
                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}" />
              
              <!-- Project Operations -->
              <Button Content="New Project"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding NewProjectCommand}" />
              
              <Button Content="Load Project"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding LoadProjectCommand}" />
              
              <Button Content="Save Project"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding SaveProjectCommand}" />
              
              <Button Content="Save Project As..."
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding SaveProjectAsCommand}" />
              
              <!-- Separator -->
              <Border Height="1"
                      Background="{ThemeResource SystemControlForegroundBaseLowBrush}"
                      Margin="20,15" />
              
              <!-- ROM Operations -->
              <Button Content="Load ROM"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding LoadRomCommand}" />
              
              <Button Content="Reload ROM"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding ReloadRomCommand}" />
              
              <!-- RAM Operations -->
              <Button Content="Load RAM"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding LoadRamCommand}" />
              
              <Button Content="Reload RAM"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding ReloadRamCommand}" />
              
              <!-- LST Operations -->
              <Button Content="Load .LST"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding LoadLstCommand}" />
              
              <Button Content="Reload .LST"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding ReloadLstCommand}" />
              
              <!-- Separator -->
              <Border Height="1"
                      Background="{ThemeResource SystemControlForegroundBaseLowBrush}"
                      Margin="20,15" />
              
              <!-- Settings Section -->
              <TextBlock Text="Settings"
                        FontWeight="Bold"
                        FontSize="16"
                        Margin="20,10,20,10"
                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}" />
              
              <Button Content="Application Settings"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      Margin="10,5"
                      Padding="15,10"
                      Style="{StaticResource ButtonRevealStyle}"
                      Command="{Binding SettingsCommand}" />
              
            </StackPanel>
          </ScrollViewer>
        </Grid>
      </SplitView.Pane>
      
      <!-- SplitView Content (Main Application) -->
      <SplitView.Content>
        <Grid Margin="20">
          <!-- Content Grid Layout -->
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

        <!-- Top Row: Disassembly (spans both columns) -->
        <Grid Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,10">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          
          <TextBlock Grid.Row="0" 
                     Text="Disassembly" 
                     FontWeight="Bold" 
                     FontSize="16"
                     Margin="0,0,0,5" />
          
          <Border Grid.Row="1"
                  BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}" 
                  BorderThickness="1">
            <ScrollViewer>
              <TextBlock Text="{Binding DisassemblyText}"
                        FontFamily="Consolas, Courier New"
                        Padding="10"
                        TextWrapping="NoWrap" />
            </ScrollViewer>
          </Border>
        </Grid>

        <!-- Bottom Left: Registers -->
        <Grid Grid.Row="1" Grid.Column="0" Margin="0,10,5,0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          
          <TextBlock Grid.Row="0" 
                     Text="Registers" 
                     FontWeight="Bold" 
                     FontSize="16"
                     Margin="0,0,0,5" />
          
          <Border Grid.Row="1"
                  BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}" 
                  BorderThickness="1">
            <ScrollViewer>
              <TextBlock Text="{Binding RegistersText}"
                        FontFamily="Consolas, Courier New"
                        Padding="10"
                        TextWrapping="NoWrap" />
            </ScrollViewer>
          </Border>
        </Grid>

        <!-- Bottom Right: Memory -->
        <Grid Grid.Row="1" Grid.Column="1" Margin="5,10,0,0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          
          <TextBlock Grid.Row="0" 
                     Text="Memory" 
                     FontWeight="Bold" 
                     FontSize="16"
                     Margin="0,0,0,5" />
          
          <Border Grid.Row="1"
                  BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}" 
                  BorderThickness="1">
            <ScrollViewer>
              <TextBlock Text="{Binding MemoryText}"
                        FontFamily="Consolas, Courier New"
                        Padding="10"
                        TextWrapping="NoWrap" />
            </ScrollViewer>
          </Border>
        </Grid>
      </Grid>
        </Grid>
      </SplitView.Content>
    </SplitView>

    <!-- Status Bar -->
    <Border Grid.Row="2" 
            Background="{ThemeResource SystemControlBackgroundAltMediumBrush}"
            BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}" 
            BorderThickness="0,1,0,0"
            Padding="20,5">
      <TextBlock Text="{Binding StatusMessage}" />
    </Border>
  </Grid>
</Page>
